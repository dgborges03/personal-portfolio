---
import Layout from "../../layouts/layout.astro";
import { projects } from "../../data/projects.js";

export async function getStaticPaths() {
  return projects.map((p) => ({
    params: { id: p.id },
    props: { project: p },
  }));
}

const { project } = Astro.props;
---
<Layout>
  <article class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-12">
    <header>
      <h1 class="text-3xl font-semibold">{project.title}</h1>
      <p class="mt-2 text-sm text-zinc-500">
        {project.year}{project.role ? ` · ${project.role}` : ""}
      </p>
    </header>

    {project.image && (
      <div class="mt-6 w-full h-[600px] flex items-center justify-center bg-white rounded-xl border overflow-hidden">
        <img
          src={project.image}
          alt={project.title}
          class="w-full h-auto object-contain bg-white"
          loading="lazy"
          decoding="async"
        />
      </div>
    )}

    <section class="mt-8">
      <p class="text-zinc-700 leading-relaxed">{project.summary}</p>

      {project.bullets?.length > 0 && (
        <ul class="mt-6 list-disc pl-5 space-y-1 text-zinc-700">
          {project.bullets.map((b) => <li>{b}</li>)}
        </ul>
      )}

      {project.tags?.length > 0 && (
        <ul class="mt-6 flex flex-wrap gap-2">
          {project.tags.map((t) => (
            <li class="rounded-full border px-2 py-1 text-xs text-zinc-700">{t}</li>
          ))}
        </ul>
      )}

      {project.links?.length > 0 && (
        <div class="mt-8 flex flex-wrap gap-3">
          {project.links.map((l) => (
            <a
              href={l.href}
              target="_blank"
              rel="noreferrer"
              class="rounded-lg border px-3 py-1.5 text-sm hover:bg-zinc-50"
            >
              {l.label}
            </a>
          ))}
        </div>
      )}
    </section>

    <div class="mt-10">
      <a href="/#projects" class="text-sm underline underline-offset-4">← Back to projects</a>
    </div>
  </article>
</Layout>
