---
// src/pages/projects/[id].astro
import Layout from "../../layouts/Layout.astro";
import { projects } from "../../data/projects.js";

// Tell Astro which pages to generate at build time
export async function getStaticPaths() {
  return projects.map((p) => ({
    params: { id: p.id },
    props: { project: p },
  }));
}

// Receive the project from getStaticPaths()
const { project } = Astro.props;
---
<Layout>
  <article class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 py-12">
    <header>
      <h1 class="text-3xl font-semibold">{project.title}</h1>
      <p class="mt-2 text-sm text-zinc-500">
        {project.year}{project.role ? ` · ${project.role}` : ""}
      </p>
    </header>

    {project.image && (
      <img src={project.image} alt={project.title} class="mt-6 w-full rounded-xl border" loading="lazy" />
    )}

    <p class="mt-6 text-zinc-700">{project.summary}</p>

    {project.bullets?.length > 0 && (
      <ul class="mt-6 list-disc pl-5 space-y-1 text-zinc-700">
        {project.bullets.map((b) => <li>{b}</li>)}
      </ul>
    )}

    {project.tags?.length > 0 && (
      <ul class="mt-6 flex flex-wrap gap-2">
        {project.tags.map((t) => (
          <li class="rounded-full border px-2 py-1 text-xs text-zinc-700">{t}</li>
        ))}
      </ul>
    )}

    {project.links?.length > 0 && (
      <div class="mt-8 flex flex-wrap gap-3">
        {project.links.map((l) => (
          <a href={l.href} target="_blank" rel="noreferrer"
             class="rounded-lg border px-3 py-1.5 text-sm hover:bg-zinc-50">
            {l.label}
          </a>
        ))}
      </div>
    )}

    <div class="mt-10">
      <a href="/#projects" class="text-sm underline underline-offset-4">← Back to projects</a>
    </div>
  </article>
</Layout>
