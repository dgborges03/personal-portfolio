---
/**
 * Props:
 * - item: { id, title, emoji?, blurb, image?, links?, tags? }
 */
 const { item } = Astro.props;
const href = item.links?.[0]?.href || null;
---

<article
  class="group relative w-full overflow-hidden rounded-2xl border bg-gradient-to-br from-zinc-50 to-white hover:shadow-md transition"
>
  <div class="grid grid-cols-1 sm:grid-cols-3 items-stretch">
    <!-- Left: emoji + text -->
    <div class="col-span-2 p-5 sm:p-6 flex flex-col gap-2">
      <div class="flex items-center gap-3">
        {item.emoji && <span class="text-2xl">{item.emoji}</span>}
        <h3 class="text-lg font-semibold tracking-tight">{item.title}</h3>
      </div>
      <p class="text-sm text-zinc-600 leading-relaxed">{item.blurb}</p>

      {item.tags?.length > 0 && (
        <ul class="mt-2 flex flex-wrap gap-2">
          {item.tags.map((t) => (
            <li class="rounded-full border px-2 py-0.5 text-xs text-zinc-600 bg-white/60">{t}</li>
          ))}
        </ul>
      )}

      {item.links?.length > 0 && (
        <div class="mt-3 flex flex-wrap gap-3">
          {item.links.map((l) => (
            <a href={l.href} target="_blank" rel="noreferrer"
               class="inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm hover:bg-zinc-50">
              {l.label}
              <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M7 17L17 7M7 7h10v10"/>
              </svg>
            </a>
          ))}
        </div>
      )}
    </div>

    <!-- Right: image (optional) -->
    <div class="relative hidden sm:block">
      {item.image && (
        <img
          src={item.image}
          alt={item.title}
          class="absolute inset-0 h-full w-full object-cover scale-[1.03] group-hover:scale-100 transition-transform duration-300"
          loading="lazy"
          decoding="async"
        />
      )}
      {!item.image && (
        <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(244,244,245,.8),transparent_60%)]" />
      )}
    </div>
  </div>

  <!-- Whole-card link overlay if primary link exists -->
  {href && <a href={href} target="_blank" rel="noreferrer" class="absolute inset-0" aria-label={`Open ${item.title}`}></a>}
</article>
